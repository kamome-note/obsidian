以下サイトを参考にゲームを作る。本当に超絶参考になる。

ローグライクを作ったので開発手順をまとめてみた - Qiita
https://qiita.com/2dgames_jp/items/1730e7c4822091c3c320

---

## Step 1. Decide to write a game (がんばるぞ)

自分が作りたいローグライクをイメージする。
ローグライクには「PDL」と「ベルリン解釈」という2つの分類があるらしい。
- PDL：「Procedual(自動生成)」「Death(死)」「Labyrinth(迷宮)」
- ベルリン解釈：「環境の自動生成」「死んだらすべてを失う」「ターン制」「操作できるプレイヤーは一人だけ」「プレイヤーと敵は同等の能力を持つ」
かなり定義が限定的だけど、ローグライク風にしたいだけなので無視。
まぁ、ここら辺は自由に決めるつもり。

## Step 2. Hello world! (環境を整えよう)

開発環境は、自分の作りやすい環境を選ぶ。
GODOTを使用する予定。
軽いし、タダだし、貧弱なPCでも使えるから。

## Step 3. It's a boy! (画面表示とキー入力)

### プレイヤーを画面に表示する
激粗いドット絵を3Dで立たせたい。
![[Pasted image 20250124004719.png]]
超粗いドット絵を作ってみたけど、
アニメーションまで考えると時間を要する。
（こだわり過ぎて手が止まりそう）

なので、前に使ったサンプルを使わせて貰うか？（ボカロのキャラクターらしい）
![[Pasted image 20250124011157.png]]

ドット絵の女の子を歩かせる
https://robi-record.com/dot_walk/
このくらいのリアルなスタイルが好み。（アニメーションはイマイチ）
恐らく上下余白ありの64x64くらいかな。
![[スカート.gif]]
![[歩く素体.png]]

Godot 4で3Dのドット絵の色が滲む問題について
https://zenn.dev/inoutch/articles/61495235f647e4

### プレーヤーの表示

一人称視点としてひとまず表示なしとする。

### グリッド移動の実装

以下の通りアセットを流用。
[[3Dダンジョンのテンプレート]]
これを紙芝居的ではなく、移動する過程も表現するように変更要。

これを他のサンプルも参考にUpdateして、思った通りの動作に修正。
[[3Dダンジョン試作]]

![[Pasted image 20250211155841.png]]

### 移動座標の計算方法

ひとまずサンプルの方式に従う。
- セルをTileMapの床がある位置に生成
- セルとセルが隣接するときに壁を削除（道にする）
- RayCastでセル中央に存在するCollisionShape3Dとの接触を判定
- CollisionShape3Dとの接触位置を移動先の座標として取得
- Tweenにて所定の座標に移動

Tweenを使用しないなら以下のイメージでdelta時間を使って計算するべき。
```
// 現在の座標をp1、移動先座標をp2、補完フレーム数をtとする
移動中の座標 = p1 + (p2 - p1) * t
(tは、0.0〜1.0)
```

### メッセージウィンドウの表示

- まずは文字列をテキストとして表示できるようにする
- どこのモジュールからでも、メッセージを追加できるようにする
- 次に複数のテキストを表示できるようにする
- メッセージの管理をQueue(FIFO)で実装すると、表示最大数を超えたときに先頭のメッセージを消す、という処理がやりやすくなる

アセット：Dialog Managerを使って実現する。（凝ったものはいらない）

Beginner dialogue tutorial for Godot 4
https://www.youtube.com/watch?v=UhPFk8FSbd8

![[Pasted image 20250212234351.png]]
以下のような感じ。
![[Pasted image 20250213001225.png]]
ダイアログを半透明にもしたい。
システムログ的に下から上に追加で流れてゆくダイアログも欲しい。


## Step 4. The Map (マップとマップオブジェクト)


## Step 5. Saving/Loading (保存と読み込み)


## Step 6. It's alice! Alive! (モンスターとターン制)


## Step 7. Interaction (戦闘システム)


## Step 8. Data files (データファイル)

## Step 9. Items (アイテム)

### インベントリの実装

Inventory System
https://godotengine.org/asset-library/asset/1650


## Step 10. Magic (アイテム効果と特殊攻撃)


## Step 11. Simple game (テストプレイ)


## Step 12. Levels (階の生成と移動)


## Step 13. Experience (成長とスキル)


## Step 14. Citizens (店・クエスト・それ以外)


## Step 15. Free at last (あとは自由だ！)

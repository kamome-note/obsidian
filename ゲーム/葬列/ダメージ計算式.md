色々なRPGのダメージ計算式を参考にする。

数式による簡易検証は以下を使用。
[Desmos | グラフ計算機](https://www.desmos.com/calculator?lang=ja)
![[Pasted image 20250111043118.png]]

## 既存ゲームの数式
---

### ＦＦ５（FINAL FANTASY Ⅴ）
ＦＦ５のダメージ計算式を読み解いてみた
https://note.com/seki_seki_seki/n/ne1b4f81b059f
<span style="background:rgba(240, 107, 5, 0.2)"><span style="background:rgba(163, 67, 31, 0.2)"><span style="background:rgba(240, 107, 5, 0.2)">ダメージ = ( 味方武器ATK - 敵DEF ) × ( ( 力 × レベル ÷ 128 ) + 2 )</span></span></span>
武器次第でLV1でもクリアできる。
ジョブによって「力」が異なるのでその影響を大きくする意図あり。

### ＦＦシリーズ（FINAL FANTASY シリーズ）
同シリーズの基本的な計算式は以下の通り。
所謂、掛け算型の計算式。
<span style="background:rgba(240, 107, 5, 0.2)"><span style="background:rgba(240, 107, 5, 0.2)"><span style="background:rgba(163, 67, 31, 0.2)">ダメージ = (攻撃力 × 技威力 ) ÷ ( 防御力 + 定数 )</span></span></span>

### ななれん（7人の賢者と錬金術師）
ななれんのダメージ計算式と考え方
https://note.com/7renlabo/n/ne9bcc2291082
<span style="background:rgba(240, 107, 5, 0.2)"><span style="background:rgba(240, 107, 5, 0.2)">ダメージ = { ( 攻撃力 × 2.372 × 攻撃バフ ) - ( 敵防御 × 敵防御バフ ) } × 属性相性倍率 × アビリティ倍率 × クリティカル2倍固定 + 乱数(3, 4, .. , 19)</span></span>

### グラブル（グランブルーファンタジー）
所謂、掛け算型の計算式。
あんまり優れた数式とは言えない印象。
<span style="background:rgba(240, 107, 5, 0.2)"><span style="background:rgba(240, 107, 5, 0.2)">ダメージ = { ( 攻撃力 × スキル威力 × 攻撃バフ ) ÷ ( 敵防御 × 敵防御バフ ) } + 与ダメージ加算</span></span>

### 魔法使いと黒猫のウィズ
チェインの概念が独自。
チェインする程1%ずつ増加するみたい。
<span style="background:rgba(240, 107, 5, 0.2)"><span style="background:rgba(240, 107, 5, 0.2)">ダメージ = 攻撃力 × スキル倍率 × 相性 × ( 1 + チェイン数 / 100 ) × その他倍率 × 乱数(0.9～1.1) × スキル倍率(通常0.5)</span></span>

### ポケモン
ダメージ計算式から見るポケモンのゲームデザインの奥深さ
https://pokedesiaf.com/damage-formula/
<span style="background:rgba(240, 107, 5, 0.2)"><span style="background:rgba(240, 107, 5, 0.2)">ダメージ = ( ( 攻撃側レベル × 2 ÷ 5 ＋ 2 ) × 威力 × 攻撃側攻撃or特攻 ÷ 防御側防御or特防 ÷ 50 + 2 ) × 乱数</span></span>

レベル比が大きな要素。
ダメージのインフレが起きにくい。
レベルによって相性を覆せる計算になっている。
同じレベル同士であればレベルが上がっても攻撃側/被弾側の有利不利が変わらない。
低レベル帯だとレベル比の違いが大きいが、HPの大小がそれを吸収する式になっている、らしい。

例）攻撃X、レベル35、威力200、防御100　攻撃の伸びは直線的
![[Pasted image 20250111034240.png]]
例）防御X、レベル35、威力200、攻撃100　防御の減衰は指数関数的
![[Pasted image 20250111034834.png]]
→防御が低いと瞬殺されるのが判る。

例）レベルX、威力200、攻撃100、防御100　レベルの伸びは急勾配の直線的
![[Pasted image 20250111054234.png]]
→レベルの影響が大きい。

### ドラクエ（ドラゴンクエストシリーズ）
<span style="background:rgba(240, 107, 5, 0.2)"><span style="background:rgba(240, 107, 5, 0.2)">ダメージ = ( 攻撃力 ÷ 2  - 防御力 ÷ 4 ) ± 乱数</span></span>

かなりシンプルな計算式。攻撃と防御でほぼ威力が決まる。
確かに、どの攻撃でどの程度ダメージが出るか分かり易い作りになっている。
![[Pasted image 20250111035753.png]]

### モンスターハンターライズ
<span style="background:rgba(240, 200, 0, 0.2)"><span style="background:rgba(240, 107, 5, 0.2)">ダメージ = 攻撃力 × モーション値 × 斬れ味補正 × 会心補正 × 武器補正 × 物理肉質</span></span>
これもシンプル。アクション要素あるので最適打撃の考え方あり。
### テイルズ
<span style="background:rgba(240, 107, 5, 0.2)"><span style="background:rgba(240, 200, 0, 0.2)">ダメージ = (攻撃力 - 防御力 ) × 技威力 × 補正値</span></span>
これもシンプル。攻撃と防御でほぼ威力が決まる。

### アークナイツ
超ややこしいを計算している。
分岐条件でツギハギしてこねくり回し感が凄い。
美しくない。
https://arknights.wikiru.jp/index.php?%E3%83%80%E3%83%A1%E3%83%BC%E3%82%B8%E8%A8%88%E7%AE%97%E5%BC%8F#baseFunc

### 世界樹の迷宮
世界樹の迷宮シリーズ ダメージ計算式まとめ
https://sq5-research.hatenablog.com/entry/2023/02/26/130000
世界樹の迷宮X wiki
https://w.atwiki.jp/sekaiju_mazex/pages/118.html
https://pastebin.com/jFnMqDET

程よい値にするために、数字を少しコネコネしているが、
それなりに良くできた計算式。

*簡易計算式*
- 味方から敵への通常攻撃ダメージ = ( ATK - DEF ) × 補正倍率
- 敵から味方への通常攻撃ダメージ = ( ATK × 2 - DEF ÷ 2 ) × 補正倍率

*詳細計算式*
<span style="background:rgba(240, 107, 5, 0.2)">【最終ダメージ】 = 【基礎ダメージ】 × 【共通加算枠】 × 【独立乗算枠】 × 【スキル倍率】 × 【属性相性倍率】 × 【乗算乱数】 × 【その他補正】 + 【加算乱数】</span>

<span style="background:rgba(240, 107, 5, 0.2)">【基礎ダメージ】 = ( <u>補正倍率 × 攻撃側ATK × 3</u> - <u>防御側DEF × 0.2</u> ) × 0.717</span>

【補正倍率】（怪しげな計算式だがそれなりに理に適っている…）
IF 攻撃側のATK ≧ 防御側のDEF
<span style="background:rgba(240, 107, 5, 0.2)">補正倍率 = 0.3 + { ( 1 - <u>( DEF ÷ ATK ) ) ^ 3</u> } × 1.7</span>
IF 攻撃側のATK < 防御側のDEF
<span style="background:rgba(240, 107, 5, 0.2)">補正倍率 = 1 - { √( <u>√( DEF ÷ ATK )</u> ) } × 0.7</span>

DEF100をベースにした例：　赤 ATK ＞ DEF 青 ATK ＜ DEF
![[Pasted image 20250111040134.png]]
→微妙な数式であることが良く判る
→攻撃が低いとほぼ直線的にダメージが減少（青）
→攻撃が強いと指数関数的にダメージが上昇（赤）
→青（ATK ＜ DEF）の数式だけだと駄目なのか

ATK100をベースにした例：　赤 ATK ＞ DEF 青 ATK ＜ DEF
![[Pasted image 20250111041022.png]]
→防御が低いと指数関数的にダメージ増加（赤）
→防御が高いとゆるやかにダメージ減少（青）

→青 ATK ＜ DEF の数式だけだと駄目なのかな？
→恐らく攻撃力が強いときのインフレ具合を加速させたい意図だと思われる。

大ダメージを出したいなら敵DEFの2.8倍以上の味方ATKを確保するとよい。
逆に味方DEFが敵ATKの約1.4倍を下回ると被ダメージが急増。

【共通加算枠】 = 1 + バフ25% + バフ15% + …

【独立乗算枠】 = バフ120% × バフ150% × …

【スキル倍率】 = スキル倍率120%　　（通常攻撃：【スキル倍率】 = 100%）

【属性相性倍率】 = 有利相性150% × 不利相性50%

【乗算乱数】：0.98, 0.99, 1.00, 1.01, 1.02　のいずれかを採用

【加算乱数】：0, 1, 2, 3, 4　のいずれかを採用

STRと武器ATK、VITと防具DEFの数値は計算上は等価
VITや防具DEFの影響が大きいので、HPや属性耐性だけを上げても効果は薄い

毒ダメージ = { 基準値 + ( レベル × 0.1667 ) + 乱数 } × { 1 + ( レベル × 0.04 ) } + 乱数

回復量 = { ( 0.43572 × スキル倍率 ) + ( 0.21198 × √(スキル倍率) ) } × WIS + 16.667 × スキル倍率

会心率

命中率

蘇生成功

デバフ成功

行動順

先制攻撃率

不意打ち発生率

逃走成功率


## 葬列の数式案

世界樹の数式が良さそう。
相手の防御を下回っていてもそれなりにはダメージを与えられる。
相手の防御を上回る程にダメージがそこそこインフレする。

![[Pasted image 20250111043118.png]]

最終ダメージ = (基礎ダメージ × 共通加算枠 × 独立乗算枠 × スキル倍率 × 属性相性倍率 × 乗算乱数  × 難易度調整係数 ) + 加算乱数

基礎ダメージ = ( 補正倍率 × 攻撃側ATK × 3 - 防御側DEF × 0.2 ) × 0.717
IF 攻撃側のATK ≧ 防御側のDEF
補正倍率 = 0.3 + { ( 1 - <u>( DEF ÷ ATK ) ) ^ 3</u> } × 1.7
IF 攻撃側のATK < 防御側のDEF
補正倍率 = 1 - { √( <u>√( DEF ÷ ATK )</u> ) } × 0.7

共通加算枠 = 100% + バフ25% + バフ15% + …
独立乗算枠 = BP強化(110%, 130%, 160%, 200%) × 連携(125%, 150%, 175%, 200%)
スキル倍率 = スキル倍率120% …
属性相性倍率 = 物理有利125% × 魔法有利125% × 物理不利75% × 魔法不利75%
難易度調整係数 = 被ダメージ：0.8　/　与ダメージ：1.2
乗算乱数：0.98, 0.99, 1.00, 1.01, 1.02
加算乱数：0, 1, 2, 3, 4

バフとBP強化と連携をモリモリに積んで、一撃でドンが爽快。






ふわっとしたBlenderの話 (1)
https://note.com/nwsnkn/n/ne6f946658bb7
ふわりとしたBlenderの話 (2)
https://note.com/nwsnkn/n/nf8920e51f04c

---

## そもそもBlenderって何？

Wikipediaによると、「3DCGソフトのツールセット」らしいです。
アニメ映画が筆頭に挙げられてます。そうなんです。Blenderは動画を作るためのソフトなんですよ。だからかどうかわかりませんが、Blender財団の中の人たちは、その昔、下記動画、Elephants Dreamという映像作品を作りました。Blenderでこの作品を作りながら、この作品が不自由なく作れるよう、Blenderの機能を決めていったのでしょう。

確かにBlenderはモデリングツールを内包しているので、3Dモデルづくりにも使えます。ですが、そもそもとしてBlenderは映像づくりのツールで、私たちがやってるのは、その工程の一部を使ってる傍流的な（でも一応想定内の）使い方だというのは、意識した方が理解が速いと思います。

## オブジェクト

オブジェクトって何？
オブジェクトはオレンジ色のアイコン！

![[Pasted image 20250126002914.png]]

3Dビューポートの「追加」メニューから追加できる存在のことです。

![[Pasted image 20250126002936.png]]

箱やボールのような形状的なものだけでなく、カメラやライトやアーマチュア（骨格）もオブジェクトです。
共通項無さそうですが、あります。オブジェクトは、3D空間上に配置された何かです。配置されたというのが重要で、箱もライトもカメラも、それぞれ位置情報を持ってるんです。

その位置情報がトランスフォームです。3DビューポートでNキー押すと右上に出てくるやつです。位置・回転・スケールから成ってます。
![[Pasted image 20250126003008.png]]

あと、オブジェクトは互いに親子関係を結ぶことができます。誰かの親になった子オブジェクトは、親が動くといっしょに動くし、親が回転するといっしょに回転します。
これによって、  
- 人（子）が電車（親）に乗ってる  
- ペン（子）が人（親）に握られてる  
- ベルトポーチ（子）が人（親）にくっ付いている  
- タイヤ（子）が車（親）を構成している  
という関係を表現できます。

Tabキーで切り替えて使うオブジェクトモードっていうのは、文字通りこのオブジェクトを操作するモードなんですね。オブジェクトの特性である、トランスフォーム（位置・回転・スケール）と親子関係をいじるモードなんです。

![[Pasted image 20250126003050.png]]

## オブジェクトデータ

オブジェクトを作ると、オブジェクトを表すオレンジ色のアイコンが現れて、同じ名前の緑色のアイコンも出てきます。これ、オブジェクトとは別物です。
![[Pasted image 20250126003122.png]]

緑色のはオブジェクトデータです。複数種類合って、メッシュデータとかライトデータとかカメラデータとかアーマチュアデータとか呼ばれてます。名前の通り、とにかくデータです。オブジェクトの中身です。
メッシュデータなら、形状そのもの。ライトデータなら明るさとか光の色です。これらがオブジェクトにリンクされて、位置が与えられることで、3D空間に配置されるのです。

## メッシュ

メッシュは形状を表すデータです。
今日私たちがゲームや映画で目にするCGは、サッカーボールや提灯のように、三角形や四角形を貼り合わせて立体の **表面の形（重要）** を作り、それを画面上に描いて作られています。いわゆるポリゴンってやつです。

三角形や四角形、つまり面は、辺が集まってできてます。三角なら3つの辺、四角なら4つの辺です。そしてそれぞれの辺は、2つの点からできてます。3次元空間上に座標を持つ点、頂点です。  
つまりメッシュは、面や辺や頂点の集まりです。網の目のように形を紡ぐので、「メッシュ」なんです。

![[Pasted image 20250126003304.png]]

Tabキーで切り替えて使う編集モードは、何を編集するかというと、このメッシュを編集するためのモードです。いわばメッシュ編集モードです。

![[Pasted image 20250126003319.png]]

## メッシュオブジェクト

メッシュは3D空間上に配置されて、目に見える形になります。そのためのオブジェクトがメッシュオブジェクトです。  
オレンジ色の三角形のアイコンです。

![[Pasted image 20250126003336.png]]

前述の通り、オブジェクトはトランスフォーム（位置情報）を持ってます。さらに、メッシュオブジェクトの場合、メッシュデータ（緑の三角形）を割り当てることができます。これによって、メッシュに3D空間上の位置が与えられ、配置されるわけです。

Unityやってる人なら、「MeshRendererの付いたGameObject」と言い換えるとピンとくると思います。トレーディングカードゲームなら、召喚されて「場に出た」状態です。

メッシュオブジェクトの追加は、3Dビューポートのメニューからできます。「追加」＞「メッシュ」項目です。ここから、平面とか立方体とか選べますが、どれ選んでもメッシュオブジェクトが追加されます。

じゃあ、平面とか立方体とかの違いはなに？  
これは初期メッシュの違いです。メッシュオブジェクト（オレンジの三角）が作られると同時に、それに割り当たったメッシュ（緑色の三角）も作られるのです。

基本的には、初期状態のメッシュに手を加えて、変形させたり、頂点や面を増やしたり減らしたりして、形を作っていきます。  
下画像のような家なら箱から作るでしょうし、みかんなら球から作ってもいいかもしれません。

![[Pasted image 20250126003430.png]]

こうやって、頂点や面を移動させたり、増やしたり減らしたりするのが、編集モードの役割です。Tabキーで移行するあのモードです。

メッシュオブジェクト（オレンジ色の三角系）とメッシュ（緑色の三角形）は別物です。ということは、メッシュオブジェクトへのメッシュの割り当ては、変更できるということです。

どういうときに割り当てを変えるのかというと、大体の場合において、オブジェクト間でメッシュを共有したいときです。  
共有とは・・・？

![[Pasted image 20250126003526.png]]

上の画像は、4つのオブジェクトが1つのメッシュを共有している例です。オレンジ色のアイコンの右下にある、緑色のアイコンが、全部Tableという名前になっています。なので、同じ形のテーブルが4つ並んでます。でも、それぞれ置いてある場所が違いますし、ひっくり返ってるのやら、小さいのやらあります。オブジェクトのトランスフォーム（位置情報）が違うからです。

共有すると何かいいことがあるのか？

利点はいろいろありますが、そのひとつは、メッシュの修正が1度で済むということです。例えばこのテーブルを猫足にしたくなりました。

![[Pasted image 20250126003604.png]]

上画像のように、オブジェクトの1つを選んで、編集モードでメッシュを修正しました。すると他の3つのテーブルも猫足になってます。4つ修正しなくて済みました。

## マテリアル

マテリアルはピンク色のチェック柄のボールのアイコンです。

![[Pasted image 20250126003638.png]]

メッシュは物の形状でした。一方、マテリアルは物の見え方です。色とかを決めます。  
マテリアルは英語だとMaterial、つまり「材料」。でも「材質」と訳した方がピンとくると思います。

模様も色です。テクスチャを使うことで、1つの物体でも部分によって違う色にすることができます。

![[Pasted image 20250126003701.png]]

色以外にもいろいろな要素がありますが、わかりやすいのを挙げると、「テカりやすさ」があります。マテリアル内のスペキュラーとかメタリックというパラメータがそれです。

![[Pasted image 20250126003713.png]]

上画像は、スペキュラーの違う2つの物体です。材質の違い、質感の違いが伝わると思います。

メッシュやメッシュオブジェクトにマテリアルを割り当てることで、メッシュに色やテカりやすさが付きます。  
違うマテリアルを割り当てれば、違う見え方になるということです。

![[Pasted image 20250126003727.png]]

## シェーダー

Blenderのシェーダーの前に、まず一般的なシェーダーの話をします。

### 一般的なシェーダー

シェーダーは、  
広義には、目に飛び込んでくる色＝画面に映る色を決定する計算式や計算手続きです。  
狭義には、その計算をするプログラムです。
Blenderもプログラムですけど、Blenderというプログラム内でシェーダープログラムが動く感じです。

画面に映る色は、イコール物体の色ではありません。
![[Pasted image 20250126003816.png]]

上の画像はオレンジ色の円柱をレンダリングしたものです。でも画像の画素、ピクセルはオレンジ色一色ではありません。  
光の当たってない部分ほど黒っぽくなってます。逆に、照り返しで白っぽい色になってる部分もあります。また、別の光源からネオン色に照らされてる部分もあります。  
こういうのを判断して決めるのがシェーダーです。

シェーダーは英語でShaderであり、「陰らせるもの」ですが、それは歴史的経緯でそう呼んでいるだけで、実際はDrawerとでも呼んだ方が実情に近いと思います。

シェーダーは描く者。  
シェーダーの違いは計算式・計算方法の違い。計算の違いは、絵の描き方の違いです。絵の描き方の違いは・・・2つの意味があると思います。

**物の在り方の違い**

シャボン玉って虹色に見えますよね。ほんとうは透明なのに。それとか、ろうそくの炎はどんなに暗いところでも目に見えます。それ自体が光ってるからです。  
こういった物体は、単にパラメータ、色とかテカりやすさとか、を変えるだけではダメで、描き方そのものを変えて表現する必要があります。

**画風の違い**

CGが写実的なものだけを表現するわけではないのは、みなさんご存じのとおりです。アニメ『アナと雪の女王』に登場する人物は風景は、明らかに現実とは異なる見え方をしてます。ゲーム『ギルティギア』シリーズのように、セル画に描いたような陰影のはっきりした絵のCGもあります。  
これは表現対象の材質の違いというよりは、それを表現するための方法、画風の違いと言えます。

![[Pasted image 20250126003941.png]]

### Blenderのシェーダー

Blenderのシェーダーは、プロパティエディターのマテリアルタブに現れます。「プリンシプルBSDF」や「放射」と名前が付いたそれです。

![[Pasted image 20250126004020.png]]

もしくは、シェーダーエディター内のノード（四角い枠）のバリエーションとして現れます。

![[Pasted image 20250126004037.png]]

Blenderのシェーダーは20種類くらいあります。

- ディフューズBSDFは、マットな質感の物体を表現します。BSDFとは写実的な絵を描くための、光の計算式です。ざらざらした物の表面は、光が拡散（diffuse）するんですよ。
- 半透明BSDFはその名の通り半透明な物体を表現します。
- プリンシプルBSDFはテカってるものから半透明なものまで、パラメータ次第で表現できる「全部入り」シェーダーです。現実における身の回りにあるほとんどの品物を、写実的に描きます。principal（主要）なシェーダーなんです。
- トーンBSDFは、陰影のエッジが効いたアニメ調の描き方をするシェーダーです。Toon（カートゥーン）です。

![[Pasted image 20250126004118.png]]
左から、トーン、プリンシプル、ディフューズ、半透明

様々なものがありますが、逆を言うとこの20数種類がBlenderのシェーダーのすべてです。これらと同じ立場のもの、シェーダープログラムそのものをユーザーが自作することは、多分できません。

もちろん、だからと言って表現の幅が狭いわけではありません。自作シェーダっぽいことをすることはできます。

マテリアルにとっては、シェーダーはノードの1つでしかありません。ノードを組み合わせることで、マテリアル出力をある程度は創造的に変更することができます。こうした作ったノードの塊は、大局的に見ると、自作のシェーダー、マイシェーダーと言えます。

![[Pasted image 20250126004207.png]]


